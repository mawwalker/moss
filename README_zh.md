# Moss - æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹

**ğŸ‡¨ğŸ‡³ ä¸­æ–‡ | [ğŸ‡ºğŸ‡¸ English](README.md)**

---

## é¡¹ç›®ç®€ä»‹

Moss æ˜¯ä¸€ä¸ªåŸºäºç°ä»£AIæŠ€æœ¯çš„æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹ï¼Œæ”¯æŒç¦»çº¿å…³é”®è¯å”¤é†’ã€å®æ—¶è¯­éŸ³è¯†åˆ«ã€æ™ºèƒ½å¯¹è¯å’Œè¯­éŸ³åˆæˆã€‚é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œé›†æˆäº†å¤šç§å…ˆè¿›çš„AIæœåŠ¡ï¼Œä¸ºç”¨æˆ·æä¾›è‡ªç„¶æµç•…çš„è¯­éŸ³äº¤äº’ä½“éªŒã€‚

[![Moss](https://img.youtube.com/vi/usgCC6tQZZg/maxresdefault.jpg)](https://www.youtube.com/watch?v=usgCC6tQZZg)

## æ ¸å¿ƒç‰¹æ€§

ğŸ¯ **ç¦»çº¿å…³é”®è¯å”¤é†’**
- æ”¯æŒå®Œå…¨ç¦»çº¿çš„å…³é”®è¯æ£€æµ‹
- å¯è‡ªå®šä¹‰ä»»æ„å”¤é†’è¯ï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰
- åŸºäº sherpa-onnx çš„é«˜æ•ˆæ¨¡å‹
- ä½åŠŸè€—æŒç»­ç›‘å¬

ğŸ—£ï¸ **å®æ—¶è¯­éŸ³è¯†åˆ«**
- åŸºäº WebSocket çš„å®æ—¶STTæœåŠ¡
- é«˜ç²¾åº¦è¯­éŸ³è½¬æ–‡å­—
- æ”¯æŒæµå¼è¯†åˆ«ï¼Œå“åº”è¿…é€Ÿ
- å‚è€ƒå®ç°ï¼š[stt-server](https://github.com/mawwalker/stt-server)

ğŸ¤– **æ™ºèƒ½å¯¹è¯ä»£ç†**
- åŸºäº Langchain Agents çš„å¯æ‰©å±•æ¶æ„
- æ”¯æŒå¤šç§å·¥å…·å’ŒæŠ€èƒ½
- å¤©æ°”æŸ¥è¯¢ã€æ™ºèƒ½å®¶å±…æ§åˆ¶ç­‰
- æ˜“äºæ·»åŠ è‡ªå®šä¹‰å·¥å…·

ğŸµ **é«˜è´¨é‡è¯­éŸ³åˆæˆ**
- åŸºäº IndexTTS çš„å…ˆè¿›TTSæŠ€æœ¯
- è‡ªç„¶æµç•…çš„è¯­éŸ³è¾“å‡º
- å‚è€ƒå®ç°ï¼š[index-tts-vllm](https://github.com/Ksuriuri/index-tts-vllm)

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å…³é”®è¯æ£€æµ‹    â”‚â”€â”€â”€â–¶â”‚    è¯­éŸ³è¯†åˆ«      â”‚â”€â”€â”€â–¶â”‚   LLM å¤„ç†     â”‚
â”‚ (Offline KWS)   â”‚    â”‚ (Realtime STT)   â”‚    â”‚ (Langchain)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   éŸ³é¢‘æ’­æ”¾      â”‚â—€â”€â”€â”€â”‚    è¯­éŸ³åˆæˆ      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ (Audio Player)  â”‚    â”‚ (IndexTTS)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Linux/macOS/Windows
- éŸ³é¢‘è®¾å¤‡ï¼ˆéº¦å…‹é£å’Œæ‰¬å£°å™¨ï¼‰

### å®‰è£…ä¾èµ–

1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-username/Moss.git
cd Moss
```

2. å®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆä»¥Ubuntuä¸ºä¾‹ï¼‰
```bash
sudo apt install portaudio19-dev python3-pyaudio sox pulseaudio libsox-fmt-all ffmpeg
```

3. å®‰è£…Pythonä¾èµ–
```bash
uv venv
source .venv/bin/activate
uv sync
```

### é…ç½®è®¾ç½®

1. å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿
```bash
cp .env.example .env
```

2. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„APIå¯†é’¥å’ŒæœåŠ¡åœ°å€

### è¿è¡Œç¨‹åº

```bash
python app.py
```

æ”¯æŒçš„å‘½ä»¤è¡Œå‚æ•°ï¼š
```bash
python app.py --help  # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‚æ•°
python app.py --verbose  # å¯ç”¨è¯¦ç»†æ—¥å¿—
python app.py --keywords-file assets/keywords_en.txt  # ä½¿ç”¨è‹±æ–‡å…³é”®è¯
```

## Docker éƒ¨ç½²

æ•¬è¯·æœŸå¾…

## æ‰©å±•åŠŸèƒ½

### æ·»åŠ è‡ªå®šä¹‰å·¥å…·

åœ¨ `agents/tools.py` ä¸­æ·»åŠ æ–°çš„å·¥å…·ï¼š

```python
from langchain_core.tools import StructuredTool

def my_custom_tool(param: str):
    """è‡ªå®šä¹‰å·¥å…·åŠŸèƒ½"""
    return f"å¤„ç†ç»“æœ: {param}"

custom_tool = StructuredTool.from_function(
    func=my_custom_tool,
    name="CustomTool",
    description="è‡ªå®šä¹‰å·¥å…·æè¿°"
)

# åœ¨ init_tools() å‡½æ•°ä¸­æ·»åŠ åˆ°å·¥å…·åˆ—è¡¨
def init_tools() -> list[StructuredTool]:
    tools = [
        openweathermap_tool,
        custom_tool,  # æ·»åŠ æ–°å·¥å…·
    ]
    return tools
```

### è‡ªå®šä¹‰å”¤é†’è¯

https://k2-fsa.github.io/sherpa/onnx/kws/index.html

## ä½¿ç”¨ç¤ºä¾‹

å¯åŠ¨ç¨‹åºåï¼Œå°è¯•ä»¥ä¸‹è¯­éŸ³æŒ‡ä»¤ï¼š

- **å¤©æ°”æŸ¥è¯¢**ï¼š
  - "è«æ–¯ï¼Œä»Šå¤©åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
  - "è«æ–¯ï¼ŒæŸ¥è¯¢ä¸Šæµ·å¤©æ°”"

- **æ™ºèƒ½å®¶å±…**ï¼ˆéœ€è¦é…ç½®ç›¸åº”å·¥å…·ï¼‰ï¼š
  - "è«æ–¯ï¼Œå¸®æˆ‘æ‰“å¼€å®¢å…çš„ç¯"
  - "è«æ–¯ï¼Œè°ƒé«˜ç©ºè°ƒæ¸©åº¦"

- **é€šç”¨å¯¹è¯**ï¼š
  - "è«æ–¯ï¼Œä»Šå¤©æ˜¯å‡ å·ï¼Ÿ"
  - "è«æ–¯ï¼Œè®²ä¸ªç¬‘è¯"

## é…ç½®è¯´æ˜

## æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æé†’**
- æœ¬é¡¹ç›®ä»åœ¨å¼€å‘ä¸­ï¼Œå¯èƒ½å­˜åœ¨Bug

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬çƒ­çƒˆæ¬¢è¿å„ä½å¼€å‘è€…å‚ä¸é¡¹ç›®å»ºè®¾ï¼

### è´¡çŒ®æ–¹å‘

- ğŸ”§ **æ·»åŠ æ–°å·¥å…·**ï¼šæ‰©å±•Agentçš„åŠŸèƒ½
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ·»åŠ æ›´å¤šè¯­è¨€çš„æ”¯æŒ
- ğŸ› **Bugä¿®å¤**ï¼šæŠ¥å‘Šå’Œä¿®å¤é—®é¢˜
- ğŸ“š **æ–‡æ¡£å®Œå–„**ï¼šæ”¹è¿›é¡¹ç›®æ–‡æ¡£
- ğŸ¨ **ç•Œé¢ä¼˜åŒ–**ï¼šæ”¹å–„ç”¨æˆ·ä½“éªŒ
- âš¡ **æ€§èƒ½ä¼˜åŒ–**ï¼šæå‡ç³»ç»Ÿæ•ˆç‡

### æäº¤æŒ‡å—

æäº¤PRå‰è¯·ç¡®ä¿ï¼š
1. ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
2. æ·»åŠ å¿…è¦çš„æµ‹è¯•
3. æ›´æ–°ç›¸å…³æ–‡æ¡£
4. é€šè¿‡ç°æœ‰çš„æµ‹è¯•ç”¨ä¾‹

## æŠ€æœ¯æ ˆ

- **å…³é”®è¯æ£€æµ‹**: sherpa-onnx [Sherpa-onnx](https://github.com/k2-fsa/sherpa-onnx)
- **è¯­éŸ³è¯†åˆ«**: WebSocket STT ([stt-server](https://github.com/mawwalker/stt-server))
- **è¯­éŸ³åˆæˆ**: IndexTTS ([index-tts-vllm](https://github.com/Ksuriuri/index-tts-vllm))
- **å¯¹è¯å¼•æ“**: Langchain Agents
- **éŸ³é¢‘å¤„ç†**: PyAudio, SoX
- **å¼‚æ­¥æ¡†æ¶**: asyncio
- **æ—¥å¿—ç³»ç»Ÿ**: loguru

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ GPL-3.0 è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®çš„å¯å‘ï¼š
- [Azure Voice Assistant](https://github.com/DennizSvens/azure-voice-assistant)
- [Wukong Robot](https://github.com/wzpan/wukong-robot)
- [STT Server](https://github.com/mawwalker/stt-server)
- [Index TTS VLLM](https://github.com/Ksuriuri/index-tts-vllm)

## è”ç³»æˆ‘ä»¬

- GitHub Issues: [æäº¤é—®é¢˜](https://github.com/your-username/Moss/issues)
- è®¨è®ºäº¤æµ: [Discussions](https://github.com/your-username/Moss/discussions)

---

**æ¬¢è¿åŠ å…¥æˆ‘ä»¬ï¼Œå…±åŒæ‰“é€ æ›´æ™ºèƒ½çš„è¯­éŸ³åŠ©æ‰‹ï¼ğŸš€**
